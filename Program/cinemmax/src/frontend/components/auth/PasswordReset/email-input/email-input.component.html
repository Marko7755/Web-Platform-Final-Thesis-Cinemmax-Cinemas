<main class="main">
  <div class="container">
    <form *ngIf="!emailSent" class="login-box" [formGroup]="emailResetForm" (ngSubmit)="submitEmailReset()">
      <h2>Let's get your CinemmaxCinemas account back</h2>

      <label for="email">Email Address</label>
      <input type="email" id="email" formControlName="email" placeholder="example@email.com" />
      <div class="error" *ngIf="emailResetForm.get('email')?.touched && emailResetForm.get('email')?.errors">
        <span *ngIf="emailResetForm.get('email')?.errors?.['required']">Email is required</span>
        <span *ngIf="emailResetForm.get('email')?.errors?.['email']">Invalid email address</span>
      </div>

      <div *ngIf="isLoading" class="loadingSpinner"></div>

      <button type="submit" [disabled]="emailResetForm.invalid || isLoading" >
      {{ isLoading ? 'Sending...' : 'Send Reset Link'}}
      </button>
    </form>

    <div *ngIf="emailSent" class="success-box">
      <div class="success-icon">
        âœ“
      </div>
      <h2>Check your inbox</h2>
      <p>
        We've sent a password reset link to your email address.
        Follow the instructions in the message to set a new password and regain access to your account.
      </p>

      <button (click)="goToLogin()">Back to Login</button>
    </div>

    

  </div>
</main>